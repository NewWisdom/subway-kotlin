## subway-kotlin
죽이되든 밥이되든... 일단 해보는 꼬뜰린과 jpa로 쟈철 미션 구현 🦦  
마지막 협업 미션 문서, 요구사항을 기반으로 지하철 노선도, 경로조회, 협업 미션 기능 순으로 구현해나가기


* 몰라 일단 부딪혀보면서 배우는 jpa
* service-apply 참고하면서 구현해보기
* 꼬틀린 트러블 슈팅 기록 기록
* 각각 미션에서 아쉬웠던 부분 보완하기
* 갹각 미션에서 욕심내고 싶은 부분 도전하기

### 시도한 부분
* jpa 사용
* 코틀린 dls로 rest-assured 테스트 구현
* 테스트 코드 가독성 신경쓰기

### TODO
* step1 다 구현하면 전체적으로 리팩토 함 하자
* 이름 중복등 예외처리 잡기
* 패키지, 파일 분리 생각해보기
* 테스트 꼼꼼히 검증하도록 리팩토
* jpa 영속 개념 좀 더 알아보기

## 노선도 관리
### 기능 목록 - STEP1
- [x] 노선 생성
    - [x] 노선 추가시 구간 정보도 함께 등록
- [x] 노선 목록 조회
    - [x] 노선 조회 시 구간에 포함된 역 목록 응답
    - [x] 노선에 포함된 구간 정보를 통해 상행 종점부터 하행 종점까지의 역 목록을 응답
- [x] 노선 ID 조회
- [x] 노선 수정
- [x] 노선 삭제
- [x] 역 생성
- [x] 역 목록 조회
- [x] 역 삭제

#### 기능 목록 - STEP2
- [x] 구간 생성 
- [x] 구간 삭제

##### 구간 등록/제거 부가 설명
- [x] 새로 등록할 구간의 상행역과 하행역 중 노선에 이미 등록되어있는 역을 기준으로 새로운 구간을 추가
- [x] 갈래길 방지
    - [x] 하나의 노선에는 갈래길이 허용되지 않기 때문에 새로운 구간이 추가되기 전에 갈래길이 생기지 않도록 기존 구간을 변경
- [x] 구간 제거
    - [x] 종점이 제거될 경우 다음으로 오던 역이 종점이 됨
    - [x] 중간역이 제거될 경우 재배치를 함
    - [x] 노선에 A - B - C 역이 연결되어 있을 때 B역을 제거할 경우 A - C로 재배치 됨
    - [x] 거리는 두 구간의 거리의 합으로 정함


##### 구간 등록/제거 예외 설명
- [x] 역 사이에 새로운 역을 등록할 경우 기존 역 사이 길이보다 크거나 같으면 등록을 할 수 없음
- [x] 상행역과 하행역이 이미 노선에 모두 등록되어 있다면 추가할 수 없음
    - [x] A-B, B-C 구간이 등록된 상황에서 B-C 구간을 등록할 수 없음(A-C 구간도 등록할 수 없음)
- [x] 상행역과 하행역 둘 중 하나도 노선에 포함되어있지 않으면 추가할 수 없음
- [x] 구간이 하나인 노선에서 마지막 구간을 제거할 때 제거할 수 없음


### 궁금
* @Id나 연관관계 어노테이션 (@ManyToOne)에는 @Column(nullable = false) 붙이면 안된다 왜????

* 내가 한 젠킨스 잘 되는지 궁금하다